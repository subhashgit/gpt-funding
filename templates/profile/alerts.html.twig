{% extends 'base.html.twig' %}

{% block body %}
    <div class="container mx-auto p-8">
        <section class="p-6 bg-white rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300 ease-in-out">
            <h1 class="text-2xl font-bold mb-6">Alerts</h1>

            <div>

                <div class="mt-5">
                    <!-- Form -->

                    {{ form_start(emailNotificationForm) }}

                    {{ form_errors(emailNotificationForm) }}

                    <div class="grid gap-y-4">
                        <!-- Form Group -->
                        <div>
                            {{ form_label(emailNotificationForm.notificationEmail, 'Email For Notifications', {
                                'label_attr': {
                                    'class': 'text-gray-600'
                                }
                            }) }}
                            <div class="relative">
                                {{ form_widget(emailNotificationForm.notificationEmail, {
                                    'attr': {
                                        'class': 'py-3 px-4 block w-full border-gray-200 rounded-md text-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400',
                                    },
                                }) }}
                                <div class="hidden absolute inset-y-0 right-0 flex items-center pointer-events-none pr-3">
                                    <svg class="h-5 w-5 text-red-500" width="16" height="16" fill="currentColor"
                                         viewBox="0 0 16 16" aria-hidden="true">
                                        <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>
                                    </svg>
                                </div>
                                {{ form_help(emailNotificationForm.notificationEmail) }}
                                {{ form_errors(emailNotificationForm.notificationEmail) }}
                            </div>
                        </div>
                        <!-- End Form Group -->
                        <div>
                            {{ form_label(emailNotificationForm.username, 'Username', {
                                'label_attr': {
                                    'class': 'text-gray-600'
                                }
                            }) }}
                            <div class="relative">
                                {{ form_widget(emailNotificationForm.username, {
                                    'attr': {
                                        'class': 'py-3 px-4 block w-full border-gray-200 rounded-md text-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400',
                                    },
                                }) }}
                                <div class="hidden absolute inset-y-0 right-0 flex items-center pointer-events-none pr-3">
                                    <svg class="h-5 w-5 text-red-500" width="16" height="16" fill="currentColor"
                                         viewBox="0 0 16 16" aria-hidden="true">
                                        <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>
                                    </svg>
                                </div>
                                {{ form_errors(emailNotificationForm.username) }}
                            </div>
                        </div>
                        <button type="submit"
                                class="py-3 px-4 inline-flex justify-center items-center gap-2 rounded-md border border-transparent font-semibold bg-blue-500 text-white hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all text-sm dark:focus:ring-offset-gray-800">
                            Update profile
                        </button>
                    </div>
                    {{ form_rest(emailNotificationForm) }}

                    {{ form_end(emailNotificationForm) }}
                    <!-- End Form -->
                </div>
            </div>

            <h3 class="text-2xl font-bold mb-6 py-2">Subscriptions</h3>
            <div class="hs-accordion-group">
                <div class="hs-accordion active" id="hs-basic-heading-one">
                    <button class="hs-accordion-toggle hs-accordion-active:text-blue-600 group py-3 inline-flex items-center gap-x-3 w-full font-semibold text-left text-gray-800 transition hover:text-gray-500 dark:hs-accordion-active:text-blue-500 dark:text-gray-200 dark:hover:text-gray-400"
                            aria-controls="hs-basic-collapse-one">
                        <svg class="hs-accordion-active:hidden hs-accordion-active:text-blue-600 hs-accordion-active:group-hover:text-blue-600 block w-3 h-3 text-gray-600 group-hover:text-gray-500 dark:text-gray-400"
                             width="16" height="16" viewBox="0 0 16 16" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path d="M2.62421 7.86L13.6242 7.85999" stroke="currentColor" stroke-width="2"
                                  stroke-linecap="round"/>
                            <path d="M8.12421 13.36V2.35999" stroke="currentColor" stroke-width="2"
                                  stroke-linecap="round"/>
                        </svg>
                        <svg class="hs-accordion-active:block hs-accordion-active:text-blue-600 hs-accordion-active:group-hover:text-blue-600 hidden w-3 h-3 text-gray-600 group-hover:text-gray-500 dark:text-gray-400"
                             width="16" height="16" viewBox="0 0 16 16" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path d="M2.62421 7.86L13.6242 7.85999" stroke="currentColor" stroke-width="2"
                                  stroke-linecap="round"/>
                        </svg>
                        Grant Location
                    </button>
                    <div id="hs-basic-collapse-one"
                         class="hs-accordion-content w-full overflow-hidden transition-[height] duration-300"
                         aria-labelledby="hs-basic-heading-one">
                        {{ component('CheckboxOptions', {
                            options: filtersLocation,
                            name: 'location',
                            selectedFilters: selectedFilters,
                        }) }}
                    </div>
                </div>

                <div class="hs-accordion" id="hs-basic-heading-two">
                    <button class="hs-accordion-toggle hs-accordion-active:text-blue-600 group py-3 inline-flex items-center gap-x-3 w-full font-semibold text-left text-gray-800 transition hover:text-gray-500 dark:hs-accordion-active:text-blue-500 dark:text-gray-200 dark:hover:text-gray-400"
                            aria-controls="hs-basic-collapse-two">
                        <svg class="hs-accordion-active:hidden hs-accordion-active:text-blue-600 hs-accordion-active:group-hover:text-blue-600 block w-3 h-3 text-gray-600 group-hover:text-gray-500 dark:text-gray-400"
                             width="16" height="16" viewBox="0 0 16 16" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path d="M2.62421 7.86L13.6242 7.85999" stroke="currentColor" stroke-width="2"
                                  stroke-linecap="round"/>
                            <path d="M8.12421 13.36V2.35999" stroke="currentColor" stroke-width="2"
                                  stroke-linecap="round"/>
                        </svg>
                        <svg class="hs-accordion-active:block hs-accordion-active:text-blue-600 hs-accordion-active:group-hover:text-blue-600 hidden w-3 h-3 text-gray-600 group-hover:text-gray-500 dark:text-gray-400"
                             width="16" height="16" viewBox="0 0 16 16" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path d="M2.62421 7.86L13.6242 7.85999" stroke="currentColor" stroke-width="2"
                                  stroke-linecap="round"/>
                        </svg>
                        Grant Categories
                    </button>
                    <div id="hs-basic-collapse-two"
                         class="hs-accordion-content hidden w-full overflow-hidden transition-[height] duration-300"
                         aria-labelledby="hs-basic-heading-two">
                        {{ component('CheckboxOptions', {
                            options: filtersCategory,
                            name: 'category',
                            selectedFilters: selectedFilters,
                        }) }}
                    </div>
                </div>

                <div class="hs-accordion" id="hs-basic-heading-three">
                    <button class="hs-accordion-toggle hs-accordion-active:text-blue-600 group py-3 inline-flex items-center gap-x-3 w-full font-semibold text-left text-gray-800 transition hover:text-gray-500 dark:hs-accordion-active:text-blue-500 dark:text-gray-200 dark:hover:text-gray-400"
                            aria-controls="hs-basic-collapse-three">
                        <svg class="hs-accordion-active:hidden hs-accordion-active:text-blue-600 hs-accordion-active:group-hover:text-blue-600 block w-3 h-3 text-gray-600 group-hover:text-gray-500 dark:text-gray-400"
                             width="16" height="16" viewBox="0 0 16 16" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path d="M2.62421 7.86L13.6242 7.85999" stroke="currentColor" stroke-width="2"
                                  stroke-linecap="round"/>
                            <path d="M8.12421 13.36V2.35999" stroke="currentColor" stroke-width="2"
                                  stroke-linecap="round"/>
                        </svg>
                        <svg class="hs-accordion-active:block hs-accordion-active:text-blue-600 hs-accordion-active:group-hover:text-blue-600 hidden w-3 h-3 text-gray-600 group-hover:text-gray-500 dark:text-gray-400"
                             width="16" height="16" viewBox="0 0 16 16" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path d="M2.62421 7.86L13.6242 7.85999" stroke="currentColor" stroke-width="2"
                                  stroke-linecap="round"/>
                        </svg>
                        Grant Open To
                    </button>
                    <div id="hs-basic-collapse-three"
                         class="hs-accordion-content hidden w-full overflow-hidden transition-[height] duration-300"
                         aria-labelledby="hs-basic-heading-three">
                        {{ component('CheckboxOptions', {
                            options: filtersOpenTo,
                            name: 'openTo',
                            selectedFilters: selectedFilters,
                        }) }}
                    </div>
                </div>
                <div class="hs-accordion" id="hs-basic-heading-four">
                    <button class="hs-accordion-toggle hs-accordion-active:text-blue-600 group py-3 inline-flex items-center gap-x-3 w-full font-semibold text-left text-gray-800 transition hover:text-gray-500 dark:hs-accordion-active:text-blue-500 dark:text-gray-200 dark:hover:text-gray-400"
                            aria-controls="hs-basic-collapse-three">
                        <svg class="hs-accordion-active:hidden hs-accordion-active:text-blue-600 hs-accordion-active:group-hover:text-blue-600 block w-3 h-3 text-gray-600 group-hover:text-gray-500 dark:text-gray-400"
                             width="16" height="16" viewBox="0 0 16 16" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path d="M2.62421 7.86L13.6242 7.85999" stroke="currentColor" stroke-width="2"
                                  stroke-linecap="round"/>
                            <path d="M8.12421 13.36V2.35999" stroke="currentColor" stroke-width="2"
                                  stroke-linecap="round"/>
                        </svg>
                        <svg class="hs-accordion-active:block hs-accordion-active:text-blue-600 hs-accordion-active:group-hover:text-blue-600 hidden w-3 h-3 text-gray-600 group-hover:text-gray-500 dark:text-gray-400"
                             width="16" height="16" viewBox="0 0 16 16" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path d="M2.62421 7.86L13.6242 7.85999" stroke="currentColor" stroke-width="2"
                                  stroke-linecap="round"/>
                        </svg>
                        Tender Region
                    </button>
                    <div id="hs-basic-collapse-four"
                         class="hs-accordion-content hidden w-full overflow-hidden transition-[height] duration-300"
                         aria-labelledby="hs-basic-heading-four">
                        {{ component('CheckboxOptions', {
                            options: filterRegions,
                            name: 'region',
                            selectedFilters: selectedFilters,
                        }) }}
                    </div>
                </div>
                <div class="hs-accordion" id="hs-basic-heading-six">
                    <button class="hs-accordion-toggle hs-accordion-active:text-blue-600 group py-3 inline-flex items-center gap-x-3 w-full font-semibold text-left text-gray-800 transition hover:text-gray-500 dark:hs-accordion-active:text-blue-500 dark:text-gray-200 dark:hover:text-gray-400"
                            aria-controls="hs-basic-collapse-three">
                        <svg class="hs-accordion-active:hidden hs-accordion-active:text-blue-600 hs-accordion-active:group-hover:text-blue-600 block w-3 h-3 text-gray-600 group-hover:text-gray-500 dark:text-gray-400"
                             width="16" height="16" viewBox="0 0 16 16" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path d="M2.62421 7.86L13.6242 7.85999" stroke="currentColor" stroke-width="2"
                                  stroke-linecap="round"/>
                            <path d="M8.12421 13.36V2.35999" stroke="currentColor" stroke-width="2"
                                  stroke-linecap="round"/>
                        </svg>
                        <svg class="hs-accordion-active:block hs-accordion-active:text-blue-600 hs-accordion-active:group-hover:text-blue-600 hidden w-3 h-3 text-gray-600 group-hover:text-gray-500 dark:text-gray-400"
                             width="16" height="16" viewBox="0 0 16 16" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path d="M2.62421 7.86L13.6242 7.85999" stroke="currentColor" stroke-width="2"
                                  stroke-linecap="round"/>
                        </svg>
                        Tender Sector
                    </button>
                    <div id="hs-basic-collapse-six"
                         class="hs-accordion-content hidden w-full overflow-hidden transition-[height] duration-300"
                         aria-labelledby="hs-basic-heading-six">
                        {{ component('CheckboxOptions', {
                            options: filterSectors,
                            name: 'sector',
                            selectedFilters: selectedFilters,
                        }) }}
                    </div>
                </div>
                <div class="hs-accordion" id="hs-basic-heading-eight">
                    <button class="hs-accordion-toggle hs-accordion-active:text-blue-600 group py-3 inline-flex items-center gap-x-3 w-full font-semibold text-left text-gray-800 transition hover:text-gray-500 dark:hs-accordion-active:text-blue-500 dark:text-gray-200 dark:hover:text-gray-400"
                            aria-controls="hs-basic-collapse-three">
                        <svg class="hs-accordion-active:hidden hs-accordion-active:text-blue-600 hs-accordion-active:group-hover:text-blue-600 block w-3 h-3 text-gray-600 group-hover:text-gray-500 dark:text-gray-400"
                             width="16" height="16" viewBox="0 0 16 16" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path d="M2.62421 7.86L13.6242 7.85999" stroke="currentColor" stroke-width="2"
                                  stroke-linecap="round"/>
                            <path d="M8.12421 13.36V2.35999" stroke="currentColor" stroke-width="2"
                                  stroke-linecap="round"/>
                        </svg>
                        <svg class="hs-accordion-active:block hs-accordion-active:text-blue-600 hs-accordion-active:group-hover:text-blue-600 hidden w-3 h-3 text-gray-600 group-hover:text-gray-500 dark:text-gray-400"
                             width="16" height="16" viewBox="0 0 16 16" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path d="M2.62421 7.86L13.6242 7.85999" stroke="currentColor" stroke-width="2"
                                  stroke-linecap="round"/>
                        </svg>
                        Keywords
                    </button>
                    <div id="hs-basic-collapse-eight"
                         class="hs-accordion-content hidden w-full overflow-hidden transition-[height] duration-300"
                         aria-labelledby="hs-basic-heading-eight">
                        {{ form_start(keywordsForm) }}
                        <div class="py-6 first:pt-0 last:pb-0 border-t first:border-transparent border-gray-200 dark:border-gray-700">
                            <h2 class="text-xl font-bold text-gray-800 dark:text-gray-200">
                                Subscribe to keywords
                            </h2>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                When any of the specified keywords are detected in newly awarded grants, you will
                                promptly receive a notification via email.<br>
                            </p>

                            <div class="grid sm:grid-cols-12 gap-2 sm:gap-6">
                                <div class="sm:col-span-12">

                                    <ul class="tags"
                                        data-index="{{ keywordsForm.keywords|length > 0 ? keywordsForm.keywords|last.vars.name + 1 : 0 }}"
                                        data-prototype="{{ form_widget(keywordsForm.keywords.vars.prototype)|e('html_attr') }}"
                                    >
                                        {% for itemForm in keywordsForm.keywords %}
                                            <li class="item">
                                                {{ form_widget(itemForm) }}
                                                {{ form_errors(itemForm) }}
                                            </li>
                                        {% endfor %}
                                    </ul>

                                    <p class="mt-3">
                                        <button type="button"
                                                class="add_item_link inline-flex items-center gap-x-1.5 text-sm text-blue-600 decoration-2 hover:underline font-medium"
                                                data-collection-holder-class="tags"
                                                data-controller="add"
                                        >Add a keyword
                                        </button>
                                    </p>

                                    <!-- Added Submit button -->
                                    <div class="mt-3 flex justify-end">
                                        <button type="submit"
                                                class="submit_item_link inline-flex items-center gap-x-1.5 text-sm text-blue-600 decoration-2 hover:underline font-medium">
                                            Submit
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {{ form_rest(keywordsForm) }}

                        {{ form_end(keywordsForm) }}
                    </div>
                </div>
            </div>
        </section>
    </div>

{% endblock %}

{% block title %}
    Alerts
{% endblock %}

